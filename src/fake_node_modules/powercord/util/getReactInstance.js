const { webFrame } = require('electron');

let pointer = 0;
module.exports = (node) => {
  node.dataset.powercordReactInstancePointer = ++pointer;
  const realNode = webFrame.top.context.document.querySelector(`[data-powercord-react-instance-pointer="${pointer}"]`);
  realNode.removeAttribute('data-powercord-react-instance-pointer');
  const key = Object.keys(realNode).find(key => key.startsWith('__reactInternalInstance') || key.startsWith('__reactFiber'));
  return realNode[key];
}
